<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>动态规划（一）</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/styles.9de83455.css" as="style"><link rel="preload" href="/assets/js/app.9de83455.js" as="script"><link rel="preload" href="/assets/js/12.fea17c99.js" as="script"><link rel="prefetch" href="/assets/js/5.bdb77d06.js"><link rel="prefetch" href="/assets/css/1.styles.b780958f.css"><link rel="prefetch" href="/assets/js/1.b780958f.js"><link rel="prefetch" href="/assets/css/2.styles.993fa36d.css"><link rel="prefetch" href="/assets/js/2.993fa36d.js"><link rel="prefetch" href="/assets/js/3.055fb1d0.js"><link rel="prefetch" href="/assets/js/4.43750586.js"><link rel="prefetch" href="/assets/js/6.c8d3e128.js"><link rel="prefetch" href="/assets/js/7.54da2bb7.js"><link rel="prefetch" href="/assets/js/8.c2e12090.js"><link rel="prefetch" href="/assets/js/9.7cd283ac.js"><link rel="prefetch" href="/assets/js/10.a2e13b99.js"><link rel="prefetch" href="/assets/js/11.c409efe9.js"><link rel="prefetch" href="/assets/js/13.9438eb85.js"><link rel="prefetch" href="/assets/js/14.642afeeb.js"><link rel="prefetch" href="/assets/js/15.90ca1656.js"><link rel="prefetch" href="/assets/js/16.94f84fc9.js"><link rel="prefetch" href="/assets/js/17.cd0b0304.js"><link rel="prefetch" href="/assets/js/18.fd2763a5.js"><link rel="prefetch" href="/assets/js/19.e2023a85.js"><link rel="prefetch" href="/assets/js/20.5ecaaaa9.js">
    <link rel="stylesheet" href="/assets/css/styles.9de83455.css"><link rel="stylesheet" href="/assets/css/1.styles.b780958f.css"><link rel="stylesheet" href="/assets/css/2.styles.993fa36d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="动态规划（一）"><a href="#动态规划（一）" aria-hidden="true" class="header-anchor">#</a> 动态规划（一）</h1> <p>动态规划可以理解为用来优化递归的，比起递归，它少去了重复计算的部分。</p> <h2 id="通过-fibonacci-sequence-理解递归"><a href="#通过-fibonacci-sequence-理解递归" aria-hidden="true" class="header-anchor">#</a> 通过 Fibonacci Sequence 理解递归</h2> <p>定义 Fibonacci 数列为：<code>0 1 1 2 3 5 8 13 ...</code></p> <p>即从第三个数起，第 n 的数的值为前两个数的和。写一段程序来求第 n 个数的值。</p> <h3 id="递推公式"><a href="#递推公式" aria-hidden="true" class="header-anchor">#</a> 递推公式</h3> <p>第一步，根据题目可得递推公式：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token function">Fib</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">Fib</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">Fib</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="递归出口"><a href="#递归出口" aria-hidden="true" class="header-anchor">#</a> 递归出口</h3> <p>第二步，寻找递归出口，当 <code>i == 0</code> 时，<code>Fib(i) == 0</code>；当 <code>i == 1</code> 时，<code>Fib(i) == 1</code>。</p> <h3 id="递归代码-o-2-n"><a href="#递归代码-o-2-n" aria-hidden="true" class="header-anchor">#</a> 递归代码(O(2^n))</h3> <p>所以，递归方法的代码为：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">fibnacci</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> n<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">fibnacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibnacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样的递归代码会产生不少的重复计算，又叫<a href="https://en.wikipedia.org/wiki/Overlapping_subproblems" target="_blank" rel="noopener noreferrer">重叠子问题(overlap sub-problems)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，导致时间复杂度为 <code>O(2^n)</code>。比如，如果我要计算 Fib(5)：</p> <p>Fib(5) = Fib(4) + Fib(3)</p> <div class="language-java extra-class"><pre class="language-java"><code>         <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
       <span class="token operator">/</span>      \
     <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>      <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token operator">/</span>   \      <span class="token operator">/</span>   \
  <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token operator">/</span>  \
<span class="token function">F</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p>可以看到，单求一个 F(5)，就需要计算 F(3) 两次。更何况如果是求 F(100)，就会重复计算更多的数。</p> <p>因此，我们可以想到这样一种方法，当第一次求出 F(3) 时，就把这个值保存下来，在下一次需要求 F(3) 时，直接读取保存下来的值。这样的话，每个数只需要求解一次，时间复杂度下降到 <code>O(n)</code>。</p> <p><strong>这种利用保存中间值来去除重复计算的方式差不多就是动态规划的本质。</strong></p> <h3 id="非递归代码-o-n"><a href="#非递归代码-o-n" aria-hidden="true" class="header-anchor">#</a> 非递归代码(O(n))</h3> <p>为了去除重叠子问题，我们可以利用一个数组来保存值，即数组的第 n 位的值对应的是 Fib(n) 的值。但由于 Fibonacci 数列是从第一个数开始，而非第 0 个数，因此这里的 n &gt;= 1.</p> <p>接下来和上面一样，可以写出递推公式：</p> <div class="language-java extra-class"><pre class="language-java"><code>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> arr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span>
</code></pre></div><p>初始化数组：</p> <div class="language-java extra-class"><pre class="language-java"><code>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><p>通过遍历 n，将值存入数组后，最终的结果为 <code>arr[n]</code>。</p> <p>代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">fibnacci</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> n<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> arr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/12.fea17c99.js" defer></script><script src="/assets/js/app.9de83455.js" defer></script>
  </body>
</html>
